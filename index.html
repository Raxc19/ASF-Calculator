<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASF Construction Cost Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* Contact Footer Section */
        .contact-footer {
            background: #2c2c2c;
            padding: 40px 0;
            margin-top: 60px;
        }
        
        .contact-footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            align-items: center;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .contact-icon-box {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .contact-icon-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .contact-icon-box:hover::before {
            left: 100%;
        }
        
        .contact-icon {
            font-size: 24px;
            color: #000000;
            font-weight: bold;
            filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.1));
        }
        
        .contact-details {
            flex: 1;
        }
        
        .contact-label {
            color: #ffffff;
            font-size: 14px;
            font-weight: bold;
            letter-spacing: 1px;
            margin-bottom: 8px;
            opacity: 0.9;
        }
        
        .contact-value {
            color: #ffffff;
            font-size: 18px;
            font-weight: 500;
            line-height: 1.4;
        }
        
        .contact-value:hover {
            color: #ffd700;
            transition: color 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .contact-footer-content {
                grid-template-columns: 1fr;
                gap: 30px;
                text-align: left;
            }
            
            .contact-item {
                justify-content: flex-start;
            }
            
            .contact-value {
                font-size: 16px;
            }
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #ffffff;
            color: #000000;
            line-height: 1.6;
        }
        
        .header {
            background: #ffffff;
            padding: 30px 0;
            border-bottom: 4px solid #ffd700;
            box-shadow: 0 8px 32px rgba(255, 215, 0, 0.3);
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        /* Logo Image Styling */
        .logo-image {
            height: 120px;
            width: auto;
            max-width: 400px;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.2));
            transition: all 0.3s ease;
            background: transparent;
            border: none;
            padding: 0;
        }
        
        .logo-image:hover {
            transform: scale(1.05);
            filter: drop-shadow(3px 3px 6px rgba(0, 0, 0, 0.3));
        }
        
        /* Text Logo Styling (fallback/alternative) */
        .logo-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #000000;
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }
        
        .company-title {
            color: #ffd700;
            font-size: 3em;
            font-weight: bold;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
            letter-spacing: 2px;
        }
        
        .company-tagline {
            color: #333333;
            font-size: 1em;
            opacity: 0.9;
            font-weight: 300;
        }
        
        .header-badge {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000000;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.1em;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            border: 2px solid #ffd700;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .main-title {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .main-title h1 {
            color: #000000;
            font-size: 3.5em;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .main-title p {
            color: #333333;
            font-size: 1.4em;
            font-weight: 300;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 40px;
            margin-bottom: 50px;
        }
        
        .calculator-form {
            background: #ffffff;
            padding: 50px;
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 3px solid #ffd700;
        }
        
        .form-section {
            margin-bottom: 30px;
        }
        
        .form-section label {
            display: block;
            color: #000000;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 15px;
        }
        
        .form-section input, .form-section select {
            width: 100%;
            padding: 18px 20px;
            background: #ffffff;
            border: 3px solid #ffd700;
            border-radius: 12px;
            font-size: 1.3em;
            color: #000000;
        }
        
        .house-details {
            background: rgba(255, 215, 0, 0.1);
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            border: 2px solid #ffd700;
        }
        
        .section-title {
            color: #000000;
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .detail-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .detail-row label {
            min-width: 120px;
            font-weight: bold;
            color: #000000;
        }
        
        .detail-row select {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #ffd700;
            border-radius: 8px;
            background: #ffffff;
            color: #000000;
            font-size: 1em;
        }
        
        .pricing-tiers {
            background: rgba(255, 215, 0, 0.15);
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            border: 2px solid #ffd700;
        }
        
        .tier-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .tier-card {
            background: #ffffff;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #ffd700;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            user-select: none;
        }
        
        .tier-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
        }
        
        .tier-card.selected {
            background: rgba(255, 215, 0, 0.15);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
            transform: translateY(-3px);
        }
        
        .tier-card h4 {
            color: #000000;
            font-size: 1.3em;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .tier-card p {
            color: #333333;
            margin-bottom: 15px;
        }
        
        .tier-specs {
            background: rgba(255, 215, 0, 0.1);
            padding: 12px;
            border-radius: 8px;
            font-size: 0.9em;
        }
        
        .tier-specs div {
            margin-bottom: 5px;
            color: #000000;
            font-weight: 500;
        }
        
        .options-section {
            background: rgba(255, 215, 0, 0.1);
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            border: 2px solid #ffd700;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            user-select: none;
            position: relative;
            overflow: hidden;
        }
        
        .checkbox-group::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            transition: left 0.5s ease;
        }
        
        .checkbox-group:hover {
            background: rgba(255, 215, 0, 0.2);
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);
        }
        
        .checkbox-group:hover::before {
            left: 100%;
        }
        
        .checkbox-group:active {
            transform: scale(0.98) translateX(3px);
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 22px;
            height: 22px;
            margin-right: 18px;
            accent-color: #ffd700;
            cursor: pointer;
        }
        
        .checkbox-group label {
            color: #000000;
            font-size: 1.2em;
            cursor: pointer;
            margin-bottom: 0;
            font-weight: 500;
        }
        
        .calculate-btn {
            width: 100%;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000000;
            padding: 20px;
            border: none;
            border-radius: 15px;
            font-size: 1.5em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
        }
        
        .calculate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(255, 215, 0, 0.6);
        }
        
        .live-preview {
            background: #ffffff;
            padding: 30px;
            border-radius: 20px;
            border: 3px solid #ffd700;
            box-shadow: 0 10px 25px rgba(255, 215, 0, 0.3);
            position: sticky;
            top: 20px;
            height: fit-content;
        }
        
        .preview-title {
            color: #000000;
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 2px solid #ffd700;
            padding-bottom: 15px;
        }
        
        .cost-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
            font-size: 1.1em;
        }
        
        .cost-item:last-child {
            border-bottom: none;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000000;
            font-weight: bold;
            padding: 20px;
            margin-top: 15px;
            border-radius: 12px;
            font-size: 1.3em;
        }
        
        .cost-amount {
            font-weight: bold;
            color: #000000;
            transition: all 0.4s ease;
        }
        
        /* Enhanced blur effects for smooth transitions */
        .cost-amount.updating {
            filter: blur(4px);
            opacity: 0.5;
            transform: scale(0.96);
            color: #666666;
        }
        
        .cost-amount.updated {
            filter: blur(0px);
            opacity: 1;
            transform: scale(1);
            animation: highlightUpdate 0.8s ease;
        }
        
        /* Smooth blur transition for the entire preview panel */
        .live-preview.calculating {
            filter: blur(2px);
            opacity: 0.8;
            transform: scale(0.99);
        }
        
        .live-preview.calculated {
            filter: blur(0px);
            opacity: 1;
            transform: scale(1);
            animation: previewPulse 0.6s ease;
        }
        
        @keyframes highlightUpdate {
            0% { 
                background: rgba(255, 215, 0, 0.4);
                border-radius: 8px;
                padding: 4px 8px;
                box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
            }
            50% { 
                background: rgba(255, 215, 0, 0.7);
                transform: scale(1.05);
                box-shadow: 0 0 25px rgba(255, 215, 0, 0.8);
            }
            100% { 
                background: transparent;
                transform: scale(1);
                padding: 0;
                box-shadow: none;
            }
        }
        
        @keyframes previewPulse {
            0% { 
                box-shadow: 0 10px 25px rgba(255, 215, 0, 0.3);
            }
            50% { 
                box-shadow: 0 15px 35px rgba(255, 215, 0, 0.6);
                transform: translateY(-2px);
            }
            100% { 
                box-shadow: 0 10px 25px rgba(255, 215, 0, 0.3);
                transform: translateY(0);
            }
        }
        
        /* Shimmer effect for updating costs */
        @keyframes shimmer {
            0% {
                background-position: -200px 0;
            }
            100% {
                background-position: calc(200px + 100%) 0;
            }
        }
        
        .cost-amount.shimmer {
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 215, 0, 0.3),
                transparent
            );
            background-size: 200px 100%;
            animation: shimmer 1s ease-in-out;
        }
        
        .details-btn {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000000;
            padding: 12px 25px;
            border: none;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
            border: 2px solid #ffd700;
            width: 100%;
            margin-top: 20px;
        }
        
        .details-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            overflow-y: auto;
        }
        
        .modal-content {
            background: #ffffff;
            margin: 2% auto;
            padding: 40px;
            border-radius: 20px;
            max-width: 1200px;
            width: 90%;
            position: relative;
            border: 3px solid #ffd700;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 2em;
            cursor: pointer;
            color: #ffd700;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .close-modal:hover {
            color: #ffed4e;
            transform: scale(1.1);
        }
        
        .modal-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .modal-header h2 {
            color: #000000;
            font-size: 2.5em;
            margin-bottom: 15px;
        }
        
        .project-info {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000000;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .summary-card {
            background: #ffffff;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #ffd700;
            text-align: center;
        }
        
        .summary-card h4 {
            color: #000000;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .amount {
            font-size: 2em;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 10px;
        }
        
        .breakdown-section {
            background: rgba(255, 215, 0, 0.1);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #ffd700;
            margin: 30px 0;
        }
        
        .breakdown-title {
            color: #000000;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .materials-table {
            width: 100%;
            border-collapse: collapse;
            background: #ffffff;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #ffd700;
        }
        
        .materials-table th {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000000;
            padding: 15px;
            font-weight: bold;
            border-bottom: 2px solid #ffd700;
        }
        
        .materials-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
            color: #000000;
        }
        
        .materials-table tr:hover {
            background: rgba(255, 215, 0, 0.1);
        }
        
        .category-header {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000000;
            padding: 15px;
            font-weight: bold;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
            border-radius: 10px;
        }
        
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .live-preview {
                position: relative;
                top: 0;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .company-title {
                font-size: 2.2em;
            }
            
            .logo-image {
                height: 90px;
                max-width: 300px;
            }
            
            .main-title h1 {
                font-size: 2.5em;
            }
            
            .calculator-form {
                padding: 30px 25px;
            }
            
            .tier-cards {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .detail-row {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }
            
            .detail-row label {
                min-width: auto;
            }
            
            .modal-content {
                width: 95%;
                padding: 20px;
                margin: 5% auto;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <!-- ASF Design Logo Image -->
                <img src="logo.png" alt="ASF Design Logo" class="logo-image">
                
                <!-- Text logo removed - now using image logo -->
            </div>
            <div class="header-badge">
                Professional Calculator<br>
                <small style="opacity: 0.8;">Las Vegas, Nevada</small>
            </div>
            
            <!-- Hidden Admin Link -->
            <div class="admin-access" id="admin-trigger" style="position: absolute; bottom: 5px; right: 20px; opacity: 0.1; font-size: 8px; cursor: pointer; user-select: none;">
                ⚙️
            </div>
        </div>
    </div>

    <div class="container">
        <div class="main-title">
            <h1>🏗️ Construction Cost Calculator</h1>
            <p>Professional estimates with detailed material and labor breakdowns</p>
        </div>

        <div class="main-content">
            <div class="calculator-form">
                <div class="form-section">
                    <label for="sqft">🏠 Project Square Footage</label>
                    <input type="number" id="sqft" placeholder="Enter total square footage" min="500" max="100000">
                </div>
                
                <div class="house-details">
                    <div class="section-title">🏡 Land & Location (Optional)</div>
                    
                    <div class="detail-row">
                        <label>Land Cost:</label>
                        <select id="land-cost-type">
                            <option value="none">No land cost</option>
                            <option value="manual">Enter land cost</option>
                            <option value="estimate">Estimate by sq ft</option>
                        </select>
                    </div>
                    
                    <div class="detail-row" id="manual-land-cost" style="display: none;">
                        <label>Land Price:</label>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 1.2em; font-weight: bold; color: #ffd700;">$</span>
                            <input type="number" id="land-price" placeholder="Enter land cost" min="0" style="flex: 1; padding: 12px 15px; border: 2px solid #ffd700; border-radius: 8px;">
                        </div>
                    </div>
                    
                    <div class="detail-row" id="estimate-land-cost" style="display: none;">
                        <label>Land Size:</label>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <input type="number" id="land-sqft" placeholder="Land sq ft" min="0" style="width: 150px; padding: 12px 15px; border: 2px solid #ffd700; border-radius: 8px;">
                            <span>×</span>
                            <select id="land-price-per-sqft" style="flex: 1; padding: 12px 15px; border: 2px solid #ffd700; border-radius: 8px;">
                                <option value="8">$8/sq ft - Rural/Remote areas</option>
                                <option value="15">$15/sq ft - Outer Las Vegas suburbs</option>
                                <option value="25" selected>$25/sq ft - Standard Las Vegas</option>
                                <option value="40">$40/sq ft - Desirable neighborhoods</option>
                                <option value="60">$60/sq ft - Premium areas (Summerlin, etc.)</option>
                                <option value="80">$80/sq ft - Luxury areas (The Lakes, etc.)</option>
                                <option value="120">$120/sq ft - High-end (Red Rock, etc.)</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="house-details">
                    <div class="section-title">🏡 House Details</div>
                    
                    <div class="detail-row">
                        <label>Windows:</label>
                        <select id="windows">
                            <option value="0">Select number of windows</option>
                            <option value="5">5 windows ($3,000)</option>
                            <option value="8">8 windows ($4,800)</option>
                            <option value="10">10 windows ($6,000)</option>
                            <option value="12">12 windows ($7,200)</option>
                            <option value="15">15 windows ($9,000)</option>
                            <option value="18">18 windows ($10,800)</option>
                            <option value="20">20 windows ($12,000)</option>
                            <option value="25">25+ windows ($15,000+)</option>
                        </select>
                    </div>
                    
                    <div class="detail-row">
                        <label>Bedrooms:</label>
                        <select id="bedrooms">
                            <option value="1">1 bedroom</option>
                            <option value="2">2 bedrooms</option>
                            <option value="3">3 bedrooms</option>
                            <option value="4">4 bedrooms</option>
                            <option value="5">5+ bedrooms</option>
                        </select>
                    </div>
                    
                    <div class="detail-row">
                        <label>Bathrooms:</label>
                        <select id="bathrooms">
                            <option value="1">1 bathroom</option>
                            <option value="1.5">1.5 bathrooms</option>
                            <option value="2">2 bathrooms</option>
                            <option value="2.5">2.5 bathrooms</option>
                            <option value="3">3 bathrooms</option>
                            <option value="3.5">3.5+ bathrooms</option>
                        </select>
                    </div>
                    
                    <div class="detail-row">
                        <label>Kitchens:</label>
                        <select id="kitchens">
                            <option value="1">1 kitchen</option>
                            <option value="2">2 kitchens</option>
                            <option value="3">3+ kitchens</option>
                        </select>
                    </div>
                    
                    <div class="detail-row">
                        <label>Garages:</label>
                        <select id="garages">
                            <option value="0">No garage</option>
                            <option value="1">1-car garage</option>
                            <option value="2">2-car garage</option>
                            <option value="3">3+ car garage</option>
                        </select>
                    </div>
                    
                    <div class="detail-row">
                        <label>Stories:</label>
                        <select id="stories">
                            <option value="1">1 story</option>
                            <option value="1.5">1.5 stories</option>
                            <option value="2">2 stories</option>
                            <option value="2.5">2.5+ stories</option>
                        </select>
                    </div>
                </div>
                
                <div class="pricing-tiers">
                    <div class="section-title">💰 Select Pricing Tier</div>
                    
                    <div class="tier-cards">
                        <div class="tier-card selected" data-tier="residential">
                            <h4>🏠 Residential</h4>
                            <p>Standard residential construction with quality materials</p>
                            <div class="tier-specs">
                                <div>📏 Size: 800-5,000 sq ft</div>
                                <div>📦 Materials: Standard rates</div>
                                <div>👷 Labor: $85/sq ft</div>
                                <div>💼 Profit: 19%</div>
                            </div>
                        </div>
                        
                        <div class="tier-card" data-tier="custom">
                            <h4>🏆 Custom Home</h4>
                            <p>High-end custom construction with premium materials</p>
                            <div class="tier-specs">
                                <div>📏 Size: 2,500-15,000 sq ft</div>
                                <div>📦 Materials: +15% premium</div>
                                <div>👷 Labor: +25% precision</div>
                                <div>💼 Profit: 22%</div>
                            </div>
                        </div>
                        
                        <div class="tier-card" data-tier="commercial">
                            <h4>🏢 Commercial</h4>
                            <p>Commercial projects with efficiency pricing</p>
                            <div class="tier-specs">
                                <div>📏 Size: 5,000-100,000 sq ft</div>
                                <div>📦 Materials: -8% volume</div>
                                <div>👷 Labor: -5% efficiency</div>
                                <div>💼 Profit: 16%</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="options-section">
                    <div class="section-title">📋 Estimate Options</div>
                    
                    <div class="checkbox-group" data-checkbox="include_labor">
                        <input type="checkbox" id="include_labor">
                        <label for="include_labor">Include Labor Costs</label>
                    </div>
                    
                    <div class="checkbox-group" data-checkbox="include_profit">
                        <input type="checkbox" id="include_profit">
                        <label for="include_profit">Include Contractor Profit</label>
                    </div>
                    
                    <div class="checkbox-group" data-checkbox="include_specialized">
                        <input type="checkbox" id="include_specialized">
                        <label for="include_specialized">Include Specialized Work (HVAC, Insulation, Painting)</label>
                    </div>
                </div>
                
                <button type="button" class="calculate-btn" onclick="openDetailsModal()">
                    💰 Calculate Construction Cost
                </button>
            </div>
            
            <div class="live-preview" id="live-preview">
                <div class="preview-title">💵 Live Cost Preview</div>
                
                <div class="cost-item">
                    <span>🧱 Materials Cost:</span>
                    <span class="cost-amount" id="materials-cost">$0</span>
                </div>
                
                <div class="cost-item">
                    <span>👷 Labor Cost:</span>
                    <span class="cost-amount" id="labor-cost">$0</span>
                </div>
                
                <div class="cost-item">
                    <span>📋 Other Costs:</span>
                    <span class="cost-amount" id="other-cost">$0</span>
                </div>
                
                <div class="cost-item">
                    <span>💼 Profit:</span>
                    <span class="cost-amount" id="profit-cost">$0</span>
                </div>
                
                <div class="cost-item" style="border-bottom: 1px solid rgba(255, 215, 0, 0.3);">
                    <span>🏗️ Construction Total:</span>
                    <span class="cost-amount" id="construction-total">$0</span>
                </div>
                
                <div class="cost-item" id="land-cost-item" style="display: none;">
                    <span>🏞️ Land Cost:</span>
                    <span class="cost-amount" id="land-cost-display">$0</span>
                </div>
                
                <div class="cost-item">
                    <span>🏆 TOTAL PROJECT VALUE:</span>
                    <span class="cost-amount" id="total-cost">$0</span>
                </div>
                
                <button type="button" class="details-btn" onclick="openDetailsModal()">
                    📊 View Detailed Breakdown
                </button>
                
                <button type="button" class="details-btn" onclick="downloadEstimateImage()" style="margin-top: 10px; background: linear-gradient(45deg, #2196f3, #42a5f5);">
                    📥 Download PNG Estimate
                </button>
            </div>
        </div>
    </div>
    
    <!-- Admin Price Update Panel (Hidden by default) -->
    <div class="admin-panel" id="admin-panel" style="display: none;">
        <div class="admin-content">
            <div class="admin-header">
                <h2>🔧 ASF Admin - Price Updates</h2>
                <button class="close-admin" onclick="closeAdminPanel()">×</button>
            </div>
            
            <div class="admin-warning">
                <p><strong>⚠️ Admin Access:</strong> Update material prices here. Changes affect all calculator estimates.</p>
            </div>
            
            <div class="price-categories">
                <div class="category-section">
                    <h3>🏗️ Foundation & Framing</h3>
                    <div class="price-updates">
                        <div class="price-item">
                            <label>90lb Concrete Mix (per bag):</label>
                            <input type="number" step="0.01" value="6.72" data-material="concrete">
                            <button onclick="updatePrice('concrete', this.previousElementSibling.value)">Update</button>
                        </div>
                        <div class="price-item">
                            <label>2x4x8 Premium Fir (per piece):</label>
                            <input type="number" step="0.01" value="3.74" data-material="lumber_2x4">
                            <button onclick="updatePrice('lumber_2x4', this.previousElementSibling.value)">Update</button>
                        </div>
                        <div class="price-item">
                            <label>2x6x8 Douglas Fir (per piece):</label>
                            <input type="number" step="0.01" value="7.98" data-material="lumber_2x6">
                            <button onclick="updatePrice('lumber_2x6', this.previousElementSibling.value)">Update</button>
                        </div>
                    </div>
                </div>
                
                <div class="category-section">
                    <h3>🔩 Fasteners & Hardware</h3>
                    <div class="price-updates">
                        <div class="price-item">
                            <label>3-1/2" Framing Nails 50lb (per box):</label>
                            <input type="number" step="0.01" value="89.97" data-material="framing_nails">
                            <button onclick="updatePrice('framing_nails', this.previousElementSibling.value)">Update</button>
                        </div>
                        <div class="price-item">
                            <label>Roofing Nails 30lb (per box):</label>
                            <input type="number" step="0.01" value="67.48" data-material="roofing_nails">
                            <button onclick="updatePrice('roofing_nails', this.previousElementSibling.value)">Update</button>
                        </div>
                        <div class="price-item">
                            <label>Drywall Screws 5lb (per box):</label>
                            <input type="number" step="0.01" value="18.97" data-material="drywall_screws">
                            <button onclick="updatePrice('drywall_screws', this.previousElementSibling.value)">Update</button>
                        </div>
                    </div>
                </div>
                
                <div class="category-section">
                    <h3>🏠 Building Materials</h3>
                    <div class="price-updates">
                        <div class="price-item">
                            <label>GAF Roof Shingles (per bundle):</label>
                            <input type="number" step="0.01" value="47.12" data-material="shingles">
                            <button onclick="updatePrice('shingles', this.previousElementSibling.value)">Update</button>
                        </div>
                        <div class="price-item">
                            <label>1/2" Drywall 4x8 (per sheet):</label>
                            <input type="number" step="0.01" value="23.98" data-material="drywall">
                            <button onclick="updatePrice('drywall', this.previousElementSibling.value)">Update</button>
                        </div>
                        <div class="price-item">
                            <label>Laminate Flooring (per sq ft):</label>
                            <input type="number" step="0.01" value="2.48" data-material="flooring">
                            <button onclick="updatePrice('flooring', this.previousElementSibling.value)">Update</button>
                        </div>
                    </div>
                </div>
                
                <div class="category-section">
                    <h3>⚡ Electrical & Plumbing</h3>
                    <div class="price-updates">
                        <div class="price-item">
                            <label>12 AWG Romex 250ft (per roll):</label>
                            <input type="number" step="0.01" value="146.00" data-material="electrical">
                            <button onclick="updatePrice('electrical', this.previousElementSibling.value)">Update</button>
                        </div>
                        <div class="price-item">
                            <label>R-15 Insulation (per sq ft):</label>
                            <input type="number" step="0.01" value="1.12" data-material="insulation">
                            <button onclick="updatePrice('insulation', this.previousElementSibling.value)">Update</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="admin-actions">
                <button class="save-all-btn" onclick="saveAllPrices()">💾 Save All Changes</button>
                <button class="reset-btn" onclick="resetToDefaults()">🔄 Reset to Defaults</button>
                <button class="export-btn" onclick="exportPrices()">📤 Export Price List</button>
            </div>
            
            <div class="last-updated">
                <p>Last updated: <span id="last-update-time">Never</span></p>
            </div>
        </div>
    </div>
    
    <!-- Hidden Canvas for PNG Generation -->
    <canvas id="estimate-canvas" style="display: none;"></canvas>
    
    <!-- Contact Footer Section -->
    <div class="contact-footer">
        <div class="contact-footer-content">
            <div class="contact-item">
                <div class="contact-icon-box">
                    <div class="contact-icon">📍</div>
                </div>
                <div class="contact-details">
                    <div class="contact-label">ADDRESS</div>
                    <div class="contact-value">4485 Riviera Ridge Ave. Las Vegas, NV 89115</div>
                </div>
            </div>
            
            <div class="contact-item">
                <div class="contact-icon-box">
                    <div class="contact-icon">📧</div>
                </div>
                <div class="contact-details">
                    <div class="contact-label">SEND MAIL US</div>
                    <div class="contact-value">info@aswframing.com</div>
                </div>
            </div>
            
            <div class="contact-item">
                <div class="contact-icon-box">
                    <div class="contact-icon">📱</div>
                </div>
                <div class="contact-details">
                    <div class="contact-label">CALL US 24/7</div>
                    <div class="contact-value">(702) 643-2900</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Detailed Results Modal -->
    <div class="modal" id="details-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            
            <div class="modal-header">
                <h2>📊 Construction Cost Breakdown</h2>
                <div class="project-info">
                    <h3 id="project-title">Project: 0 Square Feet</h3>
                    <p>Las Vegas, Nevada • Sales Tax: 8.375% • Professional ASF-Design Estimate</p>
                </div>
            </div>
            
            <div class="summary-grid">
                <div class="summary-card">
                    <h4>💰 Total Project Cost</h4>
                    <div class="amount" id="modal-total-cost">$0</div>
                    <div id="cost-per-sqft">$0 per sq ft</div>
                </div>
                
                <div class="summary-card">
                    <h4>🧱 Materials Cost</h4>
                    <div class="amount" id="modal-materials-cost">$0</div>
                    <div>Includes 8.375% tax</div>
                </div>
                
                <div class="summary-card">
                    <h4>👷 Labor Cost</h4>
                    <div class="amount" id="modal-labor-cost">$0</div>
                    <div id="labor-per-sqft">$0 per sq ft</div>
                </div>
            </div>
            
            <div class="breakdown-section">
                <div class="breakdown-title">💵 Detailed Cost Breakdown</div>
                <div id="cost-breakdown-details"></div>
            </div>
            
            <div class="breakdown-section">
                <div class="breakdown-title">🛒 Materials Shopping List</div>
                <div id="materials-breakdown"></div>
            </div>
            
            <div class="breakdown-section">
                <div class="breakdown-title">👷 Labor Breakdown</div>
                <div id="labor-breakdown"></div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced ASF Calculator Class with Smooth Blur Effects
        class ASFCalculator {
            constructor() {
                this.data = {
                    sqft: 0,
                    pricing_tier: 'residential',
                    include_labor: false,
                    include_profit: false,
                    include_specialized: false,
                    windows: 0,
                    bedrooms: 1,
                    bathrooms: 1,
                    kitchens: 1,
                    garages: 0,
                    stories: 1,
                    // New land cost properties
                    land_cost_type: 'none',
                    land_price: 0,
                    land_sqft: 0,
                    land_price_per_sqft: 25
                };
                
                this.costs = {
                    materials: 0,
                    labor: 0,
                    other: 0,
                    profit: 0,
                    construction_total: 0,
                    land_cost: 0,
                    total: 0
                };
                
                this.tiers = {
                    residential: { materials: 1.0, labor: 1.0, profit: 0.19 },
                    custom: { materials: 1.15, labor: 1.25, profit: 0.22 },
                    commercial: { materials: 0.92, labor: 0.95, profit: 0.16 }
                };
                
                this.materials = [
                    // Foundation & Structure
                    { name: "90lb Concrete Mix", category: "Foundation", qty_per_sqft: 0.16, price: 6.72, unit: "bags" },
                    { name: "#4 Rebar 20ft", category: "Foundation", qty_per_sqft: 0.05, price: 10.94, unit: "pieces" },
                    
                    // Framing
                    { name: "2x4x8 Premium Fir", category: "Framing", qty_per_sqft: 2.1, price: 3.74, unit: "pieces" },
                    { name: "2x6x8 Douglas Fir", category: "Framing", qty_per_sqft: 0.8, price: 7.98, unit: "pieces" },
                    { name: "2x8x16 Floor Joists", category: "Framing", qty_per_sqft: 0.4, price: 18.50, unit: "pieces" },
                    
                    // Fasteners
                    { name: "3-1/2\" Framing Nails (50lb)", category: "Fasteners", qty_per_sqft: 0.008, price: 89.97, unit: "boxes" },
                    { name: "1-1/4\" Roofing Nails (30lb)", category: "Fasteners", qty_per_sqft: 0.006, price: 67.48, unit: "boxes" },
                    { name: "Drywall Screws (5lb)", category: "Fasteners", qty_per_sqft: 0.003, price: 18.97, unit: "boxes" },
                    
                    // Roofing
                    { name: "GAF Timberline HDZ Shingles", category: "Roofing", qty_per_sqft: 0.03, price: 47.12, unit: "bundles" },
                    { name: "Roof Underlayment", category: "Roofing", qty_per_sqft: 0.01, price: 89.50, unit: "rolls" },
                    
                    // Electrical
                    { name: "12 AWG Romex 250ft", category: "Electrical", qty_per_sqft: 0.013, price: 146.00, unit: "rolls" },
                    { name: "GFCI Outlets", category: "Electrical", qty_per_sqft: 0.05, price: 18.50, unit: "pieces" },
                    
                    // Plumbing
                    { name: "3/4\" Copper Pipe", category: "Plumbing", qty_per_sqft: 0.15, price: 28.75, unit: "pieces" },
                    { name: "1/2\" PEX Tubing 100ft", category: "Plumbing", qty_per_sqft: 0.08, price: 89.00, unit: "rolls" },
                    
                    // Insulation
                    { name: "R-15 Wall Insulation", category: "Insulation", qty_per_sqft: 1.0, price: 1.12, unit: "sq ft" },
                    { name: "R-30 Blown-In Insulation", category: "Insulation", qty_per_sqft: 0.04, price: 12.50, unit: "bags" },
                    
                    // Drywall
                    { name: "1/2\" Drywall 4x8", category: "Drywall", qty_per_sqft: 0.075, price: 23.98, unit: "sheets" },
                    { name: "Joint Compound 50lb", category: "Drywall", qty_per_sqft: 0.02, price: 15.75, unit: "buckets" },
                    
                    // Flooring
                    { name: "Laminate Flooring", category: "Flooring", qty_per_sqft: 0.85, price: 2.48, unit: "sq ft" },
                    { name: "Flooring Underlayment", category: "Flooring", qty_per_sqft: 0.85, price: 0.75, unit: "sq ft" }
                ];
                
                this.laborRates = [
                    { name: "Framing & Structure", rate: 15.0, timeline: "2-3 weeks" },
                    { name: "Electrical Work", rate: 8.5, timeline: "1-2 weeks" },
                    { name: "Plumbing Installation", rate: 9.0, timeline: "1-2 weeks" },
                    { name: "Drywall & Finishing", rate: 12.0, timeline: "2-3 weeks" },
                    { name: "Flooring Installation", rate: 8.0, timeline: "1-2 weeks" },
                    { name: "Roofing Installation", rate: 6.5, timeline: "1 week" },
                    { name: "Exterior Siding", rate: 7.0, timeline: "1-2 weeks" },
                    { name: "Interior Finishing", rate: 18.5, timeline: "2-3 weeks" }
                ];
                
                // Blur effect management
                this.isCalculating = false;
                this.updateTimeout = null;
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.loadSavedData();
                this.calculate();
                this.updateDisplay();
                console.log('ASF Calculator with enhanced blur effects initialized');
            }
            
            setupEventListeners() {
                // Square footage input
                document.getElementById('sqft').addEventListener('input', (e) => {
                    this.data.sqft = parseFloat(e.target.value) || 0;
                    this.updateWithBlur();
                });
                
                // Land cost event listeners
                document.getElementById('land-cost-type').addEventListener('change', (e) => {
                    this.data.land_cost_type = e.target.value;
                    this.toggleLandCostInputs();
                    this.updateWithBlur();
                });
                
                document.getElementById('land-price').addEventListener('input', (e) => {
                    this.data.land_price = parseFloat(e.target.value) || 0;
                    this.updateWithBlur();
                });
                
                document.getElementById('land-sqft').addEventListener('input', (e) => {
                    this.data.land_sqft = parseFloat(e.target.value) || 0;
                    this.updateWithBlur();
                });
                
                document.getElementById('land-price-per-sqft').addEventListener('change', (e) => {
                    this.data.land_price_per_sqft = parseFloat(e.target.value) || 25;
                    this.updateWithBlur();
                });
                
                // House details selects
                ['windows', 'bedrooms', 'bathrooms', 'kitchens', 'garages', 'stories'].forEach(field => {
                    document.getElementById(field).addEventListener('change', (e) => {
                        this.data[field] = parseFloat(e.target.value) || 0;
                        this.updateWithBlur();
                    });
                });
                
                // Checkboxes with enhanced click areas
                ['include_labor', 'include_profit', 'include_specialized'].forEach(field => {
                    const checkbox = document.getElementById(field);
                    const checkboxGroup = document.querySelector(`[data-checkbox="${field}"]`);
                    
                    // Original checkbox event
                    checkbox.addEventListener('change', (e) => {
                        this.data[field] = e.target.checked;
                        this.updateWithBlur();
                    });
                    
                    // Enhanced: Click anywhere in the checkbox group to toggle
                    if (checkboxGroup) {
                        checkboxGroup.addEventListener('click', (e) => {
                            // Don't double-trigger if clicking directly on checkbox or label
                            if (e.target === checkbox || e.target.tagName === 'LABEL') {
                                return;
                            }
                            
                            // Toggle the checkbox
                            checkbox.checked = !checkbox.checked;
                            this.data[field] = checkbox.checked;
                            this.updateWithBlur();
                            
                            // Add visual feedback
                            checkboxGroup.style.transform = 'scale(0.98)';
                            setTimeout(() => {
                                checkboxGroup.style.transform = 'translateX(5px)';
                            }, 100);
                        });
                        
                        // Add enhanced hover cursor
                        checkboxGroup.style.cursor = 'pointer';
                        
                        // Add visual feedback for better UX
                        checkboxGroup.addEventListener('mousedown', () => {
                            checkboxGroup.style.transform = 'scale(0.98)';
                        });
                        
                        checkboxGroup.addEventListener('mouseup', () => {
                            setTimeout(() => {
                                checkboxGroup.style.transform = 'translateX(5px)';
                            }, 50);
                        });
                        
                        checkboxGroup.addEventListener('mouseleave', () => {
                            checkboxGroup.style.transform = 'translateX(0)';
                        });
                    }
                });
                
                // Tier cards
                document.querySelectorAll('.tier-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const tier = card.dataset.tier;
                        this.selectTier(tier);
                    });
                });
            }
            
            // Enhanced update method with smooth blur transitions
            updateWithBlur() {
                // Clear any pending updates
                if (this.updateTimeout) {
                    clearTimeout(this.updateTimeout);
                }
                
                // Start blur effect immediately
                this.startBlurEffect();
                
                // Set a timeout to simulate calculation time and create smooth transition
                this.updateTimeout = setTimeout(() => {
                    this.calculate();
                    this.updateDisplay();
                    this.saveData();
                    this.endBlurEffect();
                }, 150); // 150ms delay for smooth effect
            }
            
            startBlurEffect() {
                const previewPanel = document.getElementById('live-preview');
                const costAmounts = document.querySelectorAll('.cost-amount');
                
                // Add calculating state to preview panel
                previewPanel.classList.add('calculating');
                
                // Add updating state to all cost amounts
                costAmounts.forEach(amount => {
                    amount.classList.remove('updated', 'shimmer');
                    amount.classList.add('updating');
                });
                
                this.isCalculating = true;
            }
            
            endBlurEffect() {
                const previewPanel = document.getElementById('live-preview');
                const costAmounts = document.querySelectorAll('.cost-amount');
                
                // Remove calculating state and add calculated state
                previewPanel.classList.remove('calculating');
                previewPanel.classList.add('calculated');
                
                // Remove updating and add updated state with shimmer effect
                costAmounts.forEach((amount, index) => {
                    setTimeout(() => {
                        amount.classList.remove('updating');
                        amount.classList.add('updated', 'shimmer');
                        
                        // Remove shimmer after animation
                        setTimeout(() => {
                            amount.classList.remove('shimmer');
                        }, 1000);
                    }, index * 50); // Stagger the updates for a cascading effect
                });
                
                // Remove calculated state after animation
                setTimeout(() => {
                    previewPanel.classList.remove('calculated');
                }, 600);
                
                this.isCalculating = false;
            }
            
            toggleLandCostInputs() {
                const manualDiv = document.getElementById('manual-land-cost');
                const estimateDiv = document.getElementById('estimate-land-cost');
                const landCostItem = document.getElementById('land-cost-item');
                
                manualDiv.style.display = this.data.land_cost_type === 'manual' ? 'flex' : 'none';
                estimateDiv.style.display = this.data.land_cost_type === 'estimate' ? 'flex' : 'none';
                
                // Show/hide land cost in preview
                if (this.data.land_cost_type !== 'none') {
                    landCostItem.style.display = 'flex';
                } else {
                    landCostItem.style.display = 'none';
                }
            }
            
            selectTier(tier) {
                document.querySelectorAll('.tier-card').forEach(card => {
                    card.classList.remove('selected');
                });
                document.querySelector(`[data-tier="${tier}"]`).classList.add('selected');
                this.data.pricing_tier = tier;
                this.updateWithBlur();
            }
            
            calculate() {
                if (this.data.sqft <= 0) {
                    this.costs = { materials: 0, labor: 0, other: 0, profit: 0, construction_total: 0, land_cost: 0, total: 0 };
                    return;
                }
                
                const tier = this.tiers[this.data.pricing_tier] || this.tiers.residential;
                
                // Calculate materials cost
                const baseMaterialCost = this.data.sqft * 43.0; // $43 per sq ft base
                this.costs.materials = baseMaterialCost * tier.materials * 1.08375; // with tax
                
                // Calculate labor cost
                this.costs.labor = 0;
                if (this.data.include_labor) {
                    this.costs.labor = this.data.sqft * 75.0 * tier.labor;
                    if (this.data.include_specialized) {
                        this.costs.labor += this.data.sqft * 5.0 * tier.labor; // HVAC, insulation, painting
                    }
                }
                
                // Calculate other costs
                this.costs.other = this.data.sqft * 19.0; // Base $19 per sq ft
                
                // Add house feature costs
                if (this.data.windows > 20) this.costs.other += (this.data.windows - 20) * 300;
                if (this.data.bedrooms > 4) this.costs.other += (this.data.bedrooms - 4) * 500;
                if (this.data.bathrooms > 2.5) this.costs.other += (this.data.bathrooms - 2.5) * 2000;
                if (this.data.kitchens > 1) this.costs.other += (this.data.kitchens - 1) * 10000;
                if (this.data.garages > 2) this.costs.other += (this.data.garages - 2) * 5000;
                if (this.data.stories > 2) this.costs.other += (this.data.stories - 2) * this.data.sqft * 5.0;
                
                // Apply tier adjustments to other costs
                if (this.data.pricing_tier === 'custom') {
                    this.costs.other *= 1.05;
                } else if (this.data.pricing_tier === 'commercial') {
                    this.costs.other *= 0.98;
                }
                
                // Calculate profit
                const subtotal = this.costs.materials + this.costs.labor + this.costs.other;
                this.costs.profit = this.data.include_profit ? (subtotal * tier.profit) : 0;
                
                // Calculate construction total
                this.costs.construction_total = subtotal + this.costs.profit;
                
                // Calculate land cost
                this.costs.land_cost = 0;
                if (this.data.land_cost_type === 'manual') {
                    this.costs.land_cost = this.data.land_price;
                } else if (this.data.land_cost_type === 'estimate') {
                    this.costs.land_cost = this.data.land_sqft * this.data.land_price_per_sqft;
                }
                
                // Calculate total (construction + land)
                this.costs.total = this.costs.construction_total + this.costs.land_cost;
            }
            
            updateDisplay() {
                // Update live preview with smooth transitions
                document.getElementById('materials-cost').textContent = `${Math.round(this.costs.materials).toLocaleString()}`;
                
                if (this.data.include_labor) {
                    document.getElementById('labor-cost').textContent = `${Math.round(this.costs.labor).toLocaleString()}`;
                } else {
                    document.getElementById('labor-cost').textContent = '$0 (Not Included)';
                }
                
                document.getElementById('other-cost').textContent = `${Math.round(this.costs.other).toLocaleString()}`;
                
                if (this.data.include_profit) {
                    document.getElementById('profit-cost').textContent = `${Math.round(this.costs.profit).toLocaleString()}`;
                } else {
                    document.getElementById('profit-cost').textContent = '$0 (Not Included)';
                }
                
                document.getElementById('construction-total').textContent = `${Math.round(this.costs.construction_total).toLocaleString()}`;
                
                // Update land cost display
                if (this.data.land_cost_type !== 'none') {
                    document.getElementById('land-cost-display').textContent = `${Math.round(this.costs.land_cost).toLocaleString()}`;
                }
                
                document.getElementById('total-cost').textContent = `${Math.round(this.costs.total).toLocaleString()}`;
            }
            
            updateModal() {
                if (this.data.sqft <= 0) return;
                
                const costPerSqft = this.costs.total / this.data.sqft;
                const laborPerSqft = this.data.include_labor ? this.costs.labor / this.data.sqft : 0;
                
                // Update modal summary
                document.getElementById('project-title').textContent = `Project: ${this.data.sqft.toLocaleString()} Square Feet`;
                document.getElementById('modal-total-cost').textContent = `${Math.round(this.costs.total).toLocaleString()}`;
                document.getElementById('cost-per-sqft').textContent = `${Math.round(costPerSqft)} per sq ft`;
                document.getElementById('modal-materials-cost').textContent = `${Math.round(this.costs.materials).toLocaleString()}`;
                
                if (this.data.include_labor) {
                    document.getElementById('modal-labor-cost').textContent = `${Math.round(this.costs.labor).toLocaleString()}`;
                    document.getElementById('labor-per-sqft').textContent = `${Math.round(laborPerSqft)} per sq ft`;
                } else {
                    document.getElementById('modal-labor-cost').textContent = '$0';
                    document.getElementById('labor-per-sqft').textContent = 'Not Included';
                }
                
                // Update detailed breakdowns
                this.updateCostBreakdown();
                this.updateMaterialsBreakdown();
                this.updateLaborBreakdown();
            }
            
            updateCostBreakdown() {
                const section = document.getElementById('cost-breakdown-details');
                section.innerHTML = `
                    <div style="background: #ffffff; border: 2px solid #ffd700; border-radius: 10px; overflow: hidden;">
                        <table class="materials-table">
                            <tr>
                                <td style="font-weight: bold;">🧱 Materials (with tax):</td>
                                <td style="text-align: right; font-weight: bold;">${Math.round(this.costs.materials).toLocaleString()}</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">👷 Labor:</td>
                                <td style="text-align: right; font-weight: bold;">${this.data.include_labor ? 
                                    `${Math.round(this.costs.labor).toLocaleString()}` : '$0 (Not Included)'}</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">📋 Permits & Other Costs:</td>
                                <td style="text-align: right; font-weight: bold;">${Math.round(this.costs.other).toLocaleString()}</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">💼 Contractor Profit:</td>
                                <td style="text-align: right; font-weight: bold;">${this.data.include_profit ? 
                                    `${Math.round(this.costs.profit).toLocaleString()}` : '$0 (Not Included)'}</td>
                            </tr>
                            ${this.data.land_cost_type !== 'none' ? `
                            <tr>
                                <td style="font-weight: bold;">🏞️ Land Cost:</td>
                                <td style="text-align: right; font-weight: bold;">${Math.round(this.costs.land_cost).toLocaleString()}</td>
                            </tr>
                            ` : ''}
                            <tr style="background: linear-gradient(45deg, #ffd700, #ffed4e); font-size: 1.2em;">
                                <td style="font-weight: bold;">🏆 TOTAL PROJECT COST:</td>
                                <td style="text-align: right; font-weight: bold;">${Math.round(this.costs.total).toLocaleString()}</td>
                            </tr>
                        </table>
                    </div>
                `;
            }
            
            updateMaterialsBreakdown() {
                const section = document.getElementById('materials-breakdown');
                const categories = {};
                
                // Group materials by category
                this.materials.forEach(material => {
                    if (!categories[material.category]) {
                        categories[material.category] = [];
                    }
                    
                    const quantity = Math.ceil(material.qty_per_sqft * this.data.sqft);
                    const totalCost = quantity * material.price * 1.08375; // with tax
                    
                    categories[material.category].push({
                        ...material,
                        quantity,
                        totalCost
                    });
                });
                
                let html = '';
                let grandTotal = 0;
                
                Object.keys(categories).forEach(category => {
                    const materials = categories[category];
                    const categoryTotal = materials.reduce((sum, m) => sum + m.totalCost, 0);
                    grandTotal += categoryTotal;
                    
                    html += `
                        <div class="category-header">📦 ${category} - ${Math.round(categoryTotal).toLocaleString()}</div>
                        <table class="materials-table" style="margin-bottom: 20px;">
                            <thead>
                                <tr>
                                    <th>Material</th>
                                    <th>Quantity</th>
                                    <th>Unit Price</th>
                                    <th>Total Cost</th>
                                </tr>
                            </thead>
                            <tbody>
                    `;
                    
                    materials.forEach(material => {
                        html += `
                            <tr>
                                <td><strong>${material.name}</strong></td>
                                <td>${material.quantity.toLocaleString()} ${material.unit}</td>
                                <td>${material.price.toFixed(2)}</td>
                                <td style="font-weight: bold; color: #ffd700;">${Math.round(material.totalCost).toLocaleString()}</td>
                            </tr>
                        `;
                    });
                    
                    html += '</tbody></table>';
                });
                
                section.innerHTML = `
                    <div style="background: linear-gradient(45deg, #4caf50, #66bb6a); color: #fff; padding: 20px; border-radius: 10px; text-align: center; margin-bottom: 20px; font-size: 1.3em; font-weight: bold;">
                        🛒 Total Materials Cost: ${Math.round(grandTotal).toLocaleString()} (includes 8.375% tax)
                    </div>
                    ${html}
                `;
            }
            
            updateLaborBreakdown() {
                const section = document.getElementById('labor-breakdown');
                
                if (!this.data.include_labor) {
                    section.innerHTML = `
                        <div style="text-align: center; padding: 40px; background: rgba(255, 215, 0, 0.1); border-radius: 15px; border: 2px solid #ffd700;">
                            <h3 style="color: #000; margin-bottom: 15px;">Labor Costs Not Included</h3>
                            <p style="color: #666; font-size: 1.1em;">Check "Include Labor Costs" to see detailed labor breakdown</p>
                        </div>
                    `;
                    return;
                }
                
                let html = `
                    <table class="materials-table">
                        <thead>
                            <tr>
                                <th>Trade</th>
                                <th>Rate/Sq Ft</th>
                                <th>Total Cost</th>
                                <th>Timeline</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                this.laborRates.forEach(labor => {
                    const cost = this.data.sqft * labor.rate;
                    html += `
                        <tr>
                            <td><strong>${labor.name}</strong></td>
                            <td>${labor.rate.toFixed(2)}</td>
                            <td style="font-weight: bold; color: #ffd700;">${Math.round(cost).toLocaleString()}</td>
                            <td>${labor.timeline}</td>
                        </tr>
                    `;
                });
                
                html += '</tbody></table>';
                section.innerHTML = html;
            }
            
            saveData() {
                localStorage.setItem('asfCalculatorData', JSON.stringify(this.data));
            }
            
            loadSavedData() {
                const saved = localStorage.getItem('asfCalculatorData');
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        this.data = { ...this.data, ...data };
                        this.restoreFormState();
                    } catch (e) {
                        console.warn('Could not load saved data');
                    }
                }
            }
            
            restoreFormState() {
                document.getElementById('sqft').value = this.data.sqft || '';
                document.getElementById('windows').value = this.data.windows;
                document.getElementById('bedrooms').value = this.data.bedrooms;
                document.getElementById('bathrooms').value = this.data.bathrooms;
                document.getElementById('kitchens').value = this.data.kitchens;
                document.getElementById('garages').value = this.data.garages;
                document.getElementById('stories').value = this.data.stories;
                document.getElementById('include_labor').checked = this.data.include_labor;
                document.getElementById('include_profit').checked = this.data.include_profit;
                document.getElementById('include_specialized').checked = this.data.include_specialized;
                
                // Restore land cost settings
                document.getElementById('land-cost-type').value = this.data.land_cost_type;
                document.getElementById('land-price').value = this.data.land_price || '';
                document.getElementById('land-sqft').value = this.data.land_sqft || '';
                document.getElementById('land-price-per-sqft').value = this.data.land_price_per_sqft;
                this.toggleLandCostInputs();
                
                // Restore tier selection
                document.querySelectorAll('.tier-card').forEach(card => {
                    card.classList.remove('selected');
                });
                document.querySelector(`[data-tier="${this.data.pricing_tier}"]`).classList.add('selected');
            }
        }
        
        // Global calculator instance
        let calculator;
        
        // Modal functions
        function openDetailsModal() {
            if (calculator.data.sqft <= 0) {
                alert('Please enter the square footage first!');
                document.getElementById('sqft').focus();
                return;
            }
            
            // Add a nice blur effect to the modal content while loading
            const modal = document.getElementById('details-modal');
            const modalContent = modal.querySelector('.modal-content');
            
            modalContent.style.filter = 'blur(3px)';
            modalContent.style.opacity = '0.7';
            
            // Show modal immediately
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // Update modal content with a slight delay for smooth effect
            setTimeout(() => {
                calculator.updateModal();
                
                // Remove blur effect with smooth transition
                modalContent.style.transition = 'all 0.4s ease';
                modalContent.style.filter = 'blur(0px)';
                modalContent.style.opacity = '1';
                
                // Add a subtle entrance animation
                modalContent.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    modalContent.style.transform = 'scale(1)';
                }, 50);
                
            }, 200);
        }
        
        function closeModal() {
            const modal = document.getElementById('details-modal');
            const modalContent = modal.querySelector('.modal-content');
            
            // Add exit animation
            modalContent.style.transition = 'all 0.3s ease';
            modalContent.style.transform = 'scale(0.95)';
            modalContent.style.opacity = '0.7';
            
            setTimeout(() => {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
                
                // Reset modal content styles
                modalContent.style.transform = 'scale(1)';
                modalContent.style.opacity = '1';
                modalContent.style.filter = 'blur(0px)';
            }, 300);
        }
        
        // Initialize calculator when page loads
        document.addEventListener('DOMContentLoaded', function() {
            calculator = new ASFCalculator();
            
            // Setup admin access trigger
            let clickCount = 0;
            let clickTimer = null;
            
            document.getElementById('admin-trigger').addEventListener('click', function() {
                clickCount++;
                
                if (clickCount === 1) {
                    clickTimer = setTimeout(() => {
                        clickCount = 0;
                    }, 2000);
                } else if (clickCount === 5) {
                    // 5 clicks within 2 seconds opens admin panel
                    clearTimeout(clickTimer);
                    clickCount = 0;
                    
                    const password = prompt('🔐 Enter admin password:');
                    if (password === 'asf2025' || password === 'admin') {
                        openAdminPanel();
                    } else if (password !== null) {
                        alert('❌ Incorrect password');
                    }
                }
            });
            
            // Load any saved admin prices
            updateCalculatorPrices();
            
            // Close modal when clicking outside
            window.addEventListener('click', function(e) {
                const modal = document.getElementById('details-modal');
                if (e.target === modal) {
                    closeModal();
                }
                
                const adminPanel = document.getElementById('admin-panel');
                if (e.target === adminPanel) {
                    closeAdminPanel();
                }
            });
            
            // Add keyboard support for better UX
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const modal = document.getElementById('details-modal');
                    const adminPanel = document.getElementById('admin-panel');
                    
                    if (modal.style.display === 'block') {
                        closeModal();
                    } else if (adminPanel.style.display === 'block') {
                        closeAdminPanel();
                    }
                }
                
                // Secret keyboard shortcut: Ctrl+Shift+A
                if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                    e.preventDefault();
                    const password = prompt('🔐 Enter admin password:');
                    if (password === 'asf2025' || password === 'admin') {
                        openAdminPanel();
                    } else if (password !== null) {
                        alert('❌ Incorrect password');
                    }
                }
            });
            
            console.log('🏗️ ASF Calculator with Admin Panel loaded successfully');
            console.log('✨ Admin access: Click gear icon 5 times or Ctrl+Shift+A');
            console.log('🔑 Password: asf2025 or admin');
        });
        
        // Add some additional visual enhancements
        document.addEventListener('DOMContentLoaded', function() {
            // Add hover effects to form inputs
            const inputs = document.querySelectorAll('input[type="number"], select');
            inputs.forEach(input => {
                input.addEventListener('focus', function() {
                    this.style.transform = 'scale(1.02)';
                    this.style.boxShadow = '0 0 15px rgba(255, 215, 0, 0.4)';
                    this.style.transition = 'all 0.3s ease';
                });
                
                input.addEventListener('blur', function() {
                    this.style.transform = 'scale(1)';
                    this.style.boxShadow = 'none';
                });
            });
            
            // Add pulse effect to calculate button
            const calculateBtn = document.querySelector('.calculate-btn');
            if (calculateBtn) {
                calculateBtn.addEventListener('mouseenter', function() {
                    this.style.animation = 'pulse 0.6s ease';
                });
                
                calculateBtn.addEventListener('animationend', function() {
                    this.style.animation = '';
                });
            }
            
            // Add CSS for pulse animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes pulse {
                    0% { transform: scale(1) translateY(-3px); }
                    50% { transform: scale(1.05) translateY(-5px); }
                    100% { transform: scale(1) translateY(-3px); }
                }
                
                .form-section input:focus,
                .form-section select:focus {
                    outline: none;
                    border-color: #ffed4e !important;
                }
                
                /* Add subtle animation to tier cards */
                .tier-card {
                    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                }
                
                .tier-card:hover {
                    transform: translateY(-5px) scale(1.02);
                }
                
                .tier-card.selected {
                    animation: selectedGlow 1s ease;
                }
                
                @keyframes selectedGlow {
                    0% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.4); }
                    50% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); }
                    100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.4); }
                }
                
                /* Enhanced loading states */
                .cost-amount.updating {
                    position: relative;
                    overflow: hidden;
                }
                
                .cost-amount.updating::after {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: -100%;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
                    animation: loading-sweep 1.5s infinite;
                }
                
                @keyframes loading-sweep {
                    0% { left: -100%; }
                    100% { left: 100%; }
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>
